{
    "info" :
    {
        "type" : "conda",
        "environment": "biohub.krakenuniq"
    },



    "build":
    [
        "mamba create -y -p ->eval##self.environment<- krakenuniq"
    ],



    "implementation" :
    {

        "defaultRoute": "paired illumina",

        "commands": [
            {
                "route": "common",
                "command": "kraken2"
            }
        ],

        "sentences": {

            "body" : [
                {
                    "route" : "paired illumina",
                    "sentences" : ["<command> <options> <outputs> ->eval##inputs['database']<- ->eval##inputs['forward']<- ->eval##inputs['reverse']<-"]
                }
            ]

        }
    },



    "options": [

        {
            "route" : "common",
            "role" : "threads",
            "name" : "--threads"
        },

        {
            "route" : "common",
            "role" : "preload memory size",
            "name" : "--preload-size",
            "value" : "->eval##str(int(self.memoryPerTask[:-1) - 1) + 'G'<-"
        },

        {
            "route" : "paired illumina",
            "role" : "paired file flag",
            "name" : "--paired",
            "value" : true
        }

    ],



    "inputs" :
    [

        {
            "route" : "common",
            "role" : "database",
            "name" : "--db",
            "selection" :
            [
                {
                    "target" : "outlines",
                    "required" : ["metagenomic", "database"]
                }
            ]
        },

        {
            "route" : "paired illumina",
            "role" : "forward",
            "selection" :
            [
                {
                    "target": "outlines",
                    "required": ["reads", "forward", "no host"]
                }
            ]
        },

        {
            "route" : "paired illumina",
            "role" : "reverse",
            "selection" :
            [
                {
                    "target": "outlines",
                    "required": ["reads", "reverse", "no host"]
                }
            ]
        }
    ],



    "outputs" :
    [
        {
            "route": "common",
            "role": "reads classification",
            "name": "--report-file",
            "temporal": "reads_classification.tsv",
            "extension": ".tsv",
            "outlines": ["reads classification"]
        },

        {
            "route": "common",
            "role": "report",
            "name": "--output",
            "temporal": "report.out",
            "extension": ".out",
            "outlines": ["report"]
        }
    ]
}